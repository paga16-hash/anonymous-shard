"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[6043],{9614:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>l,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=n(4848),t=n(8453);const r={sidebar_position:40},a="Detailed Design",d={id:"report/design/detailed-design",title:"Detailed Design",description:"In this section, the detailed design of the system is presented.",source:"@site/docs/report/design/detailed-design.md",sourceDirName:"report/design",slug:"/report/design/detailed-design",permalink:"/anonymous-shard/docs/report/design/detailed-design",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:40,frontMatter:{sidebar_position:40},sidebar:"tutorialSidebar",previous:{title:"Microservices patterns",permalink:"/anonymous-shard/docs/report/design/architecture/patterns"},next:{title:"Implementation",permalink:"/anonymous-shard/docs/category/implementation"}},o={},c=[{value:"Packages",id:"packages",level:2},{value:"Domain Events",id:"domain-events",level:2},{value:"Provider Events:",id:"provider-events",level:3},{value:"Consumer Events:",id:"consumer-events",level:3},{value:"UML Diagrams",id:"uml-diagrams",level:2},{value:"Provider Node",id:"provider-node",level:2},{value:"Discovery Service",id:"discovery-service",level:3},{value:"Metric Service",id:"metric-service",level:3},{value:"Task Service",id:"task-service",level:3},{value:"Consumer Node",id:"consumer-node",level:2},{value:"Consumer Task Service:",id:"consumer-task-service",level:3}];function h(e){const s={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",strong:"strong",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"detailed-design",children:"Detailed Design"})}),"\n",(0,i.jsx)(s.p,{children:"In this section, the detailed design of the system is presented."}),"\n",(0,i.jsx)(s.h2,{id:"packages",children:"Packages"}),"\n",(0,i.jsx)(s.p,{children:"Each provider and consumer node is composed of different packages, structured based on the clean architecture principles."}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Packages Structure",src:n(7258).A+"",width:"1978",height:"1128"}),"\n",(0,i.jsx)(s.em,{children:"Figure 1: Packages Structure"})]}),"\n",(0,i.jsx)(s.h2,{id:"domain-events",children:"Domain Events"}),"\n",(0,i.jsxs)(s.p,{children:["The system follows an event-driven model, and some events like ",(0,i.jsx)(s.strong,{children:"TaskEvent"})," are shared between the provider and consumer nodes.\nIn this case, a ",(0,i.jsx)(s.strong,{children:"Shared Kernel"})," has been created to store the domain events that are shared between the two nodes.\nA particular design choice that has been made is to create interfaces for basic abstraction, such as ",(0,i.jsx)(s.strong,{children:"DomainEvent"}),", to make event management within the domain even more flexible and modular, keeping the concept clear for new features or developers."]}),"\n",(0,i.jsx)(s.h3,{id:"provider-events",children:"Provider Events:"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Provider Domain Events",src:n(1642).A+"",width:"3603",height:"718"}),"\n",(0,i.jsx)(s.em,{children:"Figure 2: Provider Domain Events"})]}),"\n",(0,i.jsx)(s.h3,{id:"consumer-events",children:"Consumer Events:"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Consumer Domain Events",src:n(3887).A+"",width:"1664",height:"685"}),"\n",(0,i.jsx)(s.em,{children:"Figure 3: Consumer Domain Events"})]}),"\n",(0,i.jsxs)(s.p,{children:["These events are documented using the ",(0,i.jsx)(s.strong,{children:"Async API"})," specification.\nAs can be read in the DevOps Section, the documentation is automatically generated and published on the GitHub Pages of the repository.\nIn this case, accepted payloads, examples, and responses are documented to make the system more understandable for possible new developers and to make the system more usable for the user."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Documentation Example",src:n(8339).A+"",width:"2093",height:"767"}),"\n",(0,i.jsx)(s.em,{children:"Figure 4: Documentation Example"})]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Handlers and Payload Example",src:n(3824).A+"",width:"470",height:"448"}),"\n",(0,i.jsx)(s.em,{children:"Figure 5: Handlers Example"}),"\n",(0,i.jsx)(s.img,{alt:"Payload Example",src:n(8336).A+"",width:"2092",height:"882"}),"\n",(0,i.jsx)(s.em,{children:"Figure 6: Payload Example"})]}),"\n",(0,i.jsxs)(s.p,{children:["The same approach has been used to document the REST API (following ",(0,i.jsx)(s.strong,{children:"OpenAPI"})," specification), available on the GitHub Pages of the repository, which can be found ",(0,i.jsx)(s.a,{href:"https://paga16-hash.github.io/anonymous-shard/",children:"here"}),"."]}),"\n",(0,i.jsx)(s.h2,{id:"uml-diagrams",children:"UML Diagrams"}),"\n",(0,i.jsx)(s.p,{children:"In the next sections, some UML diagrams are presented to show the structure of the provider and consumer node, respectively.\nIn particular, every subsystem is described with a class diagram with some notes to explain the main functionalities.\nSome implementations of the main interfaces do not repeat all the methods for simplicity, but they are all implemented in the code."}),"\n",(0,i.jsx)(s.h2,{id:"provider-node",children:"Provider Node"}),"\n",(0,i.jsx)(s.h3,{id:"discovery-service",children:"Discovery Service"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Provider Discovery Service",src:n(9925).A+"",width:"2323",height:"1182"}),"\n",(0,i.jsx)(s.em,{children:"Figure 7: Provider Discovery Service"})]}),"\n",(0,i.jsx)(s.h3,{id:"metric-service",children:"Metric Service"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Provider Metric Service",src:n(559).A+"",width:"2839",height:"674"}),"\n",(0,i.jsx)(s.em,{children:"Figure 8: Provider Metric Service"})]}),"\n",(0,i.jsx)(s.h3,{id:"task-service",children:"Task Service"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Provider Task Service",src:n(9288).A+"",width:"3014",height:"1201"}),"\n",(0,i.jsx)(s.em,{children:"Figure 9: Provider Task Service"})]}),"\n",(0,i.jsxs)(s.p,{children:["An important note here is the definition of the ",(0,i.jsx)(s.strong,{children:"Evaluator"}),", which is used to evaluate the task and understand if the node can execute it or if it has to redirect it to another node.\nAs seen in the ",(0,i.jsx)(s.strong,{children:"Task Service"})," diagram, the ",(0,i.jsx)(s.strong,{children:"Task Evaluator"})," is a component used by it.\nIt is a simple interface that has to be implemented by the user to define the evaluation logic, supporting extensibility but fixing the business logic."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Provider Task Evaluator",src:n(8018).A+"",width:"855",height:"436"}),"\n",(0,i.jsx)(s.em,{children:"Figure 10: Provider Task Evaluator"})]}),"\n",(0,i.jsx)(s.h2,{id:"consumer-node",children:"Consumer Node"}),"\n",(0,i.jsx)(s.h3,{id:"consumer-task-service",children:"Consumer Task Service:"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.img,{alt:"Consumer Task Service",src:n(4537).A+"",width:"1976",height:"925"}),"\n",(0,i.jsx)(s.em,{children:"Figure 11: Consumer Task Service"})]}),"\n",(0,i.jsxs)(s.p,{children:["As seen in the ",(0,i.jsx)(s.strong,{children:"Consumer Task Service"})," diagram, the ",(0,i.jsx)(s.strong,{children:"Task Service"})," is the main component of the consumer node used by the ",(0,i.jsx)(s.strong,{children:"Node Service"})," to interact with the network.\nIn this case, the service is simpler than the provider one, with complementary functionalities.\nAn important design choice that fixed the business logic is the ",(0,i.jsx)(s.strong,{children:"Encryptor"}),", which can be used only to decrypt the task result."]})]})}function l(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},3887:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/consumer-events-9e1bc3b4dcb755fb02981b06e770384d.png"},4537:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/consumer-task-service-83301dc247ab4a062d8ff9012df6f5e1.png"},8336:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/event-payload-520cf5cb9e47a8b530448521c4dcde7a.png"},3824:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/event-topics-83d1d9f97afe317beb8bc6f87179e6b3.png"},8339:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/events-documentation-c9cdb873b8e82ab2ecb3d70f5794f9cb.png"},7258:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/packages-903a96159561f16bc300e28df7395d31.png"},9925:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/provider-discovery-service-b5866bb3d9c59c80d1c754a98ab91c7a.png"},1642:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/provider-events-780395569216f09f4c84f360cad0a440.png"},559:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/provider-metric-service-7dbdf4858e4f296987c81f396d6972df.png"},8018:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/provider-task-evaluator-c6e68924c9aea8ec456afd673c6e87d3.png"},9288:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/provider-task-service-e1474ae1d21b855dda37ac5051819533.png"},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>d});var i=n(6540);const t={},r=i.createContext(t);function a(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);