<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-report/deployment" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Deployment | Anonymous Shard</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://paga16-hash.github.io/anonymous-shard/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://paga16-hash.github.io/anonymous-shard/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://paga16-hash.github.io/anonymous-shard/docs/report/deployment"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Deployment | Anonymous Shard"><meta data-rh="true" name="description" content="This section provides a brief overview of the deployment process and the necessary steps to deploy the system, but before that, the containerization process is explained."><meta data-rh="true" property="og:description" content="This section provides a brief overview of the deployment process and the necessary steps to deploy the system, but before that, the containerization process is explained."><link data-rh="true" rel="icon" href="/anonymous-shard/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://paga16-hash.github.io/anonymous-shard/docs/report/deployment"><link data-rh="true" rel="alternate" href="https://paga16-hash.github.io/anonymous-shard/docs/report/deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://paga16-hash.github.io/anonymous-shard/docs/report/deployment" hreflang="x-default"><link rel="stylesheet" href="/anonymous-shard/assets/css/styles.87eb4ffa.css">
<script src="/anonymous-shard/assets/js/runtime~main.6ace5c58.js" defer="defer"></script>
<script src="/anonymous-shard/assets/js/main.5da8c3f8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/anonymous-shard/"><div class="navbar__logo"><img src="/anonymous-shard/img/logo.svg" alt="Anonymous Shard Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/anonymous-shard/img/logo.svg" alt="Anonymous Shard Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Anonymous Shard</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/anonymous-shard/docs/category/report">Report</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/paga16-hash/anonymous-shard" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/anonymous-shard/docs/category/report">Report</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/anonymous-shard/docs/report/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/anonymous-shard/docs/category/analysis">Analysis</a><button aria-label="Expand sidebar category &#x27;Analysis&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/anonymous-shard/docs/category/design">Design</a><button aria-label="Expand sidebar category &#x27;Design&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/anonymous-shard/docs/report/implementation">Implementation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/anonymous-shard/docs/report/devops">DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/anonymous-shard/docs/report/testing">Testing and Evaluation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/anonymous-shard/docs/report/deployment">Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/anonymous-shard/docs/report/conclusions">Conclusions</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/anonymous-shard/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/anonymous-shard/docs/category/report"><span itemprop="name">Report</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Deployment</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Deployment</h1></header>
<p>This section provides a brief overview of the deployment process and the necessary steps to deploy the system, but before that, the containerization process is explained.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="containerization">Containerization<a href="#containerization" class="hash-link" aria-label="Direct link to Containerization" title="Direct link to Containerization">​</a></h2>
<p>The containerization process is fundamental to ensure a good deployment process. In this case, Docker is used to containerize the system, encapsulating each node in a separate container. The source code of the frontend and the backend are in different project modules to keep the system more modular but are packaged together in the same image. This approach has been followed for simplicity and to ensure that every node, including a monitoring dashboard, is encapsulated in a single container. A possible con is the fact that if some structural or architectural changes are made to the frontend, the entire Docker image needs to be rebuilt.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dockerfile">Dockerfile<a href="#dockerfile" class="hash-link" aria-label="Direct link to Dockerfile" title="Direct link to Dockerfile">​</a></h3>
<p>The created Dockerfile builds the application with two main parts: the core of the node and the relative frontend. In this case, a multi-stage build is used to optimize the image size and ensure that only the necessary dependencies are included in the final image.</p>
<ol>
<li><strong>Base Image</strong>: The build starts from the <code>node:23-slim</code> image. This image provides a lightweight Node.js environment.</li>
<li><strong>Step 1: Application Setup</strong>: In this phase, the dependencies are installed, and the application is built.</li>
<li><strong>Step 2: Final Image with Tor Installation</strong>: The final image is created with built files, and Tor is installed and configured.</li>
<li><strong>Step 3: Combining Startup Commands</strong>: The startup scripts are copied, and the startup command is defined.</li>
</ol>
<p>An important step here is the configuration of Tor, which defines the <strong>Hidden Service</strong> port for each node. Also, the proxy port is defined to ensure that the communication between the nodes is tunneled through the relative network.</p>
<p>Multiple improvements can be done in the future, such as creating a specific user for the application and defining a health check for the container.</p>
<p>A problem encountered was that during the first run of the container, the Tor service had not started, and therefore the hidden service address was not defined. This issue was resolved by modifying the startup scripts and the Dockerfile, which now set an environment variable containing the hidden service address.</p>
<p>The issue occurs only the first time because the folder in which the hidden service address is stored is a volume, so the data persists even if the container is stopped. This design choice ensures that the hidden service address remains consistent across container restarts. However, if the corresponding volume is removed, the hidden service address will change each time the container is started.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-port-mapping">Default Port Mapping<a href="#default-port-mapping" class="hash-link" aria-label="Direct link to Default Port Mapping" title="Direct link to Default Port Mapping">​</a></h3>
<p>Since all the nodes run in the same host machine, a default port mapping was needed. The mapping is done in the Docker Compose file and is defined as follows.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="providers-anonymous_mode">Providers (ANONYMOUS_MODE)<a href="#providers-anonymous_mode" class="hash-link" aria-label="Direct link to Providers (ANONYMOUS_MODE)" title="Direct link to Providers (ANONYMOUS_MODE)">​</a></h4>
<ol>
<li>All providers use an internal <code>PORT</code>: <strong>3000</strong>.</li>
<li>Their <code>API_PORT</code> values start at <strong>4001</strong> and increase sequentially, with mappings formatted as <code>&lt;API_PORT&gt;:4000</code>. This port refers to the port used by the frontend to communicate with the backend. It is important to specify this port because the frontend requests start from outside the container.</li>
<li>Frontend ports are assigned sequentially beginning at <strong>8081</strong> (mapped as <code>&lt;frontend_port&gt;:8080</code>). This port refers to the port used by the user to access the monitoring dashboard.</li>
<li>An environment variable <code>BOOTSTRAP_NODE</code> is set to &quot;true&quot; for the first <code>n</code> providers (where <code>n</code> equals <code>bootstrap_count</code>) and to &quot;false&quot; for the remainder. In this case, the address of the bootstrap node is shared with the other nodes through the startup scripts.</li>
</ol>
<p>Container names follow the pattern <code>tor-provider-i</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="consumers-anonymous_mode">Consumers (ANONYMOUS_MODE)<a href="#consumers-anonymous_mode" class="hash-link" aria-label="Direct link to Consumers (ANONYMOUS_MODE)" title="Direct link to Consumers (ANONYMOUS_MODE)">​</a></h4>
<ol>
<li>All consumers use an internal <code>PORT</code> of <strong>3000</strong>.</li>
<li>Their <code>API_PORT</code> values start at <strong>4901</strong> and increase sequentially, with mappings as <code>&lt;API_PORT&gt;:4000</code>.</li>
<li>Frontend ports are assigned sequentially beginning at <strong>8181</strong> (mapped as <code>&lt;frontend_port&gt;:8080</code>).</li>
</ol>
<p>Container names follow the pattern <code>tor-consumer-i</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="providers-local_mode">Providers (LOCAL_MODE)<a href="#providers-local_mode" class="hash-link" aria-label="Direct link to Providers (LOCAL_MODE)" title="Direct link to Providers (LOCAL_MODE)">​</a></h4>
<ol>
<li>Each provider receives a unique internal <code>PORT</code> starting at <strong>3000</strong> (e.g., provider-1 gets 3000, provider-2 gets 3001, ...).</li>
<li>Their <code>API_PORT</code> values begin at <strong>4000</strong> (e.g., provider-1: 4000, provider-2: 4001, ...) and are mapped directly (e.g., <code>&quot;4000:4000</code>&quot;).</li>
<li>Frontend ports are assigned sequentially starting at <strong>8080</strong> (e.g., provider-1: <code>&quot;8080:8080&quot;</code>, provider-2: <code>&quot;8081:8080&quot;</code>, etc.).</li>
</ol>
<p>Container names follow the pattern <code>local-provider-i</code>, and in this case, the bootstrap node variables are prefixed with <code>LOCAL_</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="consumers-local_mode">Consumers (LOCAL_MODE)<a href="#consumers-local_mode" class="hash-link" aria-label="Direct link to Consumers (LOCAL_MODE)" title="Direct link to Consumers (LOCAL_MODE)">​</a></h4>
<ol>
<li>Each consumer receives a unique internal <code>PORT</code> starting at <strong>3900</strong> (e.g., consumer-1: 3900, consumer-2: 3901, ...).</li>
<li>Their <code>API_PORT</code> values begin at <strong>4900</strong> (e.g., consumer-1: 4900, consumer-2: 4901, ...) and are mapped directly (e.g., <code>&quot;4900:4900</code>&quot;).</li>
<li>Frontend ports are assigned sequentially starting at <strong>8085</strong> (e.g., consumer-1: <code>&quot;8085:8080&quot;</code>, consumer-2: <code>&quot;8086:8080&quot;</code>, etc.).</li>
</ol>
<p>Container names follow the pattern <code>local-consumer-i</code>.</p>
<p>It is a bit complex to understand initially, but the main idea is to have a default port mapping that can be easily changed. Another important aspect is the exploitation of the Docker internal DNS, which allows communication between containers using the container name as the address.</p>
<p><strong>N.B.</strong>: The scripts detailed in the next section follow this logic.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose">Docker Compose<a href="#docker-compose" class="hash-link" aria-label="Direct link to Docker Compose" title="Direct link to Docker Compose">​</a></h2>
<p>The most convenient deployment mode of the system is to use Docker containers, particularly Docker Compose to manage the orchestration of the different services. This method adds another layer of isolation, and the system can be deployed on any machine that supports Docker. This brings a lot of advantages: in the development phase, the system can be tested on different machines without issues, and in the production phase, deployment is simplified, and the system can be easily scaled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisite">Prerequisite<a href="#prerequisite" class="hash-link" aria-label="Direct link to Prerequisite" title="Direct link to Prerequisite">​</a></h3>
<p>Docker is the only prerequisite to deploy the system. Keeping the system lightweight and easy to deploy was a key design goal, and Docker was chosen for its simplicity and portability. Moreover, a Docker feature that adapts well to this system is that containers are one-shot, meaning they are temporary and can be easily replaced. This is particularly useful when thinking about Consumer Nodes. A consumer node can be deployed, get a task result, store it locally, and then be destroyed, simply by deleting the linked volume. In this way, one-shot containers improve the system&#x27;s security. More details can be found in the Containerization Section.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-scripts">Sample Scripts<a href="#sample-scripts" class="hash-link" aria-label="Direct link to Sample Scripts" title="Direct link to Sample Scripts">​</a></h2>
<p>To streamline the deployment process, several sample bash scripts are provided. Given the decentralized nature of this system, deploying multiple nodes on the same machine is not a logical approach. Considering that this system is a prototype, the scripts are primarily intended for the development phase, where the system can be tested on a single machine. During the production phase, no scripts are required, as the system can be deployed across different machines by simply running the appropriate containers.</p>
<p>The key script for running a demo on your local computer is the <em>anonymous-shard.sh</em> script. This script facilitates the creation and execution of a series of containers representing the system&#x27;s nodes. Once the containers are running, interactions can be made from the Docker host through the corresponding frontend to observe and evaluate the system&#x27;s behavior.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usages">Usages<a href="#usages" class="hash-link" aria-label="Direct link to Usages" title="Direct link to Usages">​</a></h3>
<p>To use the script, follow these steps:</p>
<ol>
<li><strong>Clone</strong>: Clone the repository or download the scripts folder from the <a href="https://github.com/paga16-hash/anonymous-shard" target="_blank" rel="noopener noreferrer">repository</a>. Source code is not needed because Docker images are already available on Docker Hub, and the externalized configuration allows the system to run without any code modification. For details, refer to the Containerization Pattern Section.</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   git clone https://github.com/paga16-hash/anonymous-shard.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li><strong>Generate</strong>: After giving execute permissions to the script, run the following command from the folder to generate a test Docker Compose file with the specified number of nodes.<br>
<!-- -->With these scripts, the system can be deployed by specifying the <code>ANON_MODE</code> parameter as <code>false</code> if you want to run the system in non-anonymous mode.<br>
<!-- -->To run the system and pin files on the IPFS filesystem, you will need a <code>PINATA_API_KEY</code> and a <code>PINATA_API_SECRET</code>, which can be obtained for free from the <a href="https://pinata.cloud/" target="_blank" rel="noopener noreferrer">Pinata</a> website.</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x ./anonymous-shard.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./anonymous-shard.sh generate &lt;ANONYMOUS_MODE&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;PINATA_API_KEY&gt; &lt;PINATA_API_SECRET&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;DEV_API_KEY&gt; &lt;NUMBER_OF_BOOTSTRAP_NODES&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;NUMBER_OF_PROVIDERS&gt; &lt;NUMBER_OF_CONSUMERS&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li><strong>Start</strong>: Start the system with the following command.<br>
<!-- -->After this command, you will see Docker containers running, and you can interact with the Docker daemon or access the frontend to interact with the system.</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./anonymous-shard.sh start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li><strong>Stop</strong>: Stop the system with the following command.</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./anonymous-shard.sh stop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To interact with the system, you can access the frontend by opening a browser and navigating to <code>http://localhost:&lt;FRONTEND_PORT&gt;</code>.<br>
<!-- -->Since the script follows the defined port mapping, every node can be accessed using the <code>localhost</code> address and the relative port because of the Docker port forwarding.<br>
<!-- -->While the system is running, you can submit tasks, monitor the network, and view the results through the frontend.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-scripts">Other Scripts<a href="#other-scripts" class="hash-link" aria-label="Direct link to Other Scripts" title="Direct link to Other Scripts">​</a></h3>
<p>Since other scripts have been created to automate or simplify the development process, here is a brief explanation of them without going into details.</p>
<ol>
<li><strong>make-requests.sh</strong>: Automates the process of submitting tasks to the system, used to simulate user interaction with the system and different loads as analyzed in the Testing and Evaluation Chapter.</li>
<li><strong>evaluate.sh</strong>: Measures average RTT time between blocks of requests.</li>
</ol>
<p>These scripts can be found in the <code>scripts/other</code> folder of the <a href="https://github.com/paga16-hash/anonymous-shard" target="_blank" rel="noopener noreferrer">repository</a> and can be used to automate some processes and test the system in different scenarios.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/anonymous-shard/docs/report/testing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Testing and Evaluation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/anonymous-shard/docs/report/conclusions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Conclusions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#containerization" class="table-of-contents__link toc-highlight">Containerization</a><ul><li><a href="#dockerfile" class="table-of-contents__link toc-highlight">Dockerfile</a></li><li><a href="#default-port-mapping" class="table-of-contents__link toc-highlight">Default Port Mapping</a></li></ul></li><li><a href="#docker-compose" class="table-of-contents__link toc-highlight">Docker Compose</a><ul><li><a href="#prerequisite" class="table-of-contents__link toc-highlight">Prerequisite</a></li></ul></li><li><a href="#sample-scripts" class="table-of-contents__link toc-highlight">Sample Scripts</a><ul><li><a href="#usages" class="table-of-contents__link toc-highlight">Usages</a></li><li><a href="#other-scripts" class="table-of-contents__link toc-highlight">Other Scripts</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/anonymous-shard/docs/category/report">Report</a></li><li class="footer__item"><a class="footer__link-item" href="/anonymous-shard/openapi/provider-node/">Provider OpenAPI</a></li><li class="footer__item"><a class="footer__link-item" href="/anonymous-shard/openapi/consumer-node/">Consumer OpenAPI</a></li><li class="footer__item"><a class="footer__link-item" href="/anonymous-shard/asyncapi/">AsyncAPI</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/paga16-hash/anonymous-shard" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Anonymous Shard. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>